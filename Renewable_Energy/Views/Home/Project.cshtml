@using ImageMagick
@using Renewable_Energy_Entities
@using Renewable_Energy_Entities.DTOs
@model List<ProjectCategoryDTO>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="Solatec - Solar and Renewable Energy Template">
    <link href="images/favicon/favicon.png" rel="icon">
    <title>Solatec - Solar and Renewable Energy Template</title>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Rubik:400,500,600,700%7cRoboto:400,500,700&display=swap">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
    <link rel="stylesheet" href="~/css/libraries.css">
    <link rel="stylesheet" href="~/css/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="preloader">
            <div class="loading"><span></span><span></span><span></span><span></span></div>
        </div><!-- /.preloader -->
        <!-- ========================
           page title
        =========================== -->
        <section class="page-title page-title-layout1 bg-overlay bg-overlay-2 bg-parallax text-center">
            <div class="bg-img"><img src="~/images/page-titles/10.jpg" alt="background"></div>
            <div class="container">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-6 offset-lg-3">
                        <h1 class="pagetitle__heading mb-0">Projelerimiz</h1>
                        <p class="pagetitle__desc mb-0">
                            Yenilikçi teknolojilerimiz, müşterilerimizin ihtiyaçlarına net bir şekilde odaklanmamız ve 1.210 kendini adamış çalışanımızla topluma enerji veriyoruz. Yarını bugünden farklı kılalım!
                        </p>
                        <a href="#projects" class="scroll-down">
                            <i class="icon-arrow-down"></i>
                        </a>
                    </div><!-- /.col-xl-6 -->
                </div><!-- /.row -->
            </div><!-- /.container -->
        </section><!-- /.page-title -->
        <!-- ===========================
          portfolio standard
        ============================= -->
        <section id="projects" class="portfolio-layout3">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <ul class="portfolio-filter d-flex flex-wrap justify-content-center list-unstyled">
                            <li><a class="filter active" href="#" data-filter="all">Tüm Projeler</a></li>
                            <li><a class="filter" href="#" data-filter=".filter-ruzgar">Rüzgar Türbinleri</a></li>
                            <li><a class="filter" href="#" data-filter=".filter-su">Su Türbinleri</a></li>
                            <li><a class="filter" href="#" data-filter=".filter-gunes">Güneş Panalleri</a></li>
                            <li><a class="filter" href="#" data-filter=".filter-jeo">Jeotermal Türbin</a></li>
                            <li><a class="filter" href="#" data-filter=".filter-jene">Jeneratör</a></li>
                        </ul><!-- /.portfolio-filter  -->
                    </div><!-- /.col-lg-12 -->
                </div><!-- /.row -->
                <div id="filtered-items-wrap" class="row">
                    @foreach (var project in Model)
                    {
                        <div class="col-sm-6 col-md-6 col-lg-4 mix filter-infractures">
                            <div class="portfolio-item">
                                <div class="portfolio__img">
                                    @{
                                        using (var image = new MagickImage(project.ImageUrl))
                                        {
                                            image.Resize(new MagickGeometry(650, 600));
                                            var base64String = Convert.ToBase64String(image.ToByteArray());
                                            var imgSrc = $"data:image/{image.Format.ToString().ToLower()};base64,{base64String}";
                                            <img src="@imgSrc" alt="portfolio img">
                                        }
                                    }
                                </div><!-- /.portfolio-img -->
                                <div class="portfolio__body">
                                    <div class="portfolio__cat">
                                        <a href="#">@project.CategoryName</a>
                                    </div><!-- /.portfolio-cat -->
                                    <h4 class="portfolio__title"><a href="#">@project.Title</a></h4>
                                    <p class="portfolio__desc">
                                        @project.Body
                                    </p>
                                    <a href="@Url.ActionLink("ProjectDetails","Home")" class="btn btn__primary btn__sm">
                                        <i class="icon-arrow-right"></i>
                                        <span>Daha Fazlasını Öğrenin</span>
                                    </a>
                                </div><!-- /.portfolio__body -->
                            </div><!-- /.portfolio-item -->
                        </div>
                        <!-- /.col-lg-4 -->
                    }
                </div><!-- /.row -->
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                        <button type="button" class="btn btn__primary btn__outlined btn__custom loadMoreportfolio mt-30">
                            <i class="icon-arrow-right"></i> <span>Explore All Projects</span>
                        </button>
                    </div><!-- /.col-lg-12 -->
                </div><!-- /.row -->
            </div><!-- /.container -->
        </section><!-- /.portfolio standard -->
        <button id="scrollTopBtn"><i class="fas fa-long-arrow-alt-up"></i></button>

    </div><!-- /.wrapper -->

    @section Scripts{
        <script>
            $(function () {
                if (getParameterByName("selected") == "ruzgar") {
                    $("a[data-filter='.filter-ruzgar']").click();
                }
                else if (getParameterByName("selected") == "su") {
                    $("a[data-filter='.filter-su']").click();
                }
                else if (getParameterByName("selected") == "gunes") {
                    $("a[data-filter='.filter-gunes']").click();
                }
                else if (getParameterByName("selected") == "jeo") {
                    $("a[data-filter='.filter-jeo']").click();
                }
                else if (getParameterByName("selected") == "jene") {
                    $("a[data-filter='.filter-jene']").click();
                }
            });

            function getParameterByName(name, url = window.location.href) {
                name = name.replace(/[\[\]]/g, '\\$&');
                var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, ' '));
            }
        </script>
    }

    <script src="~/js/jquery-3.5.1.min.js"></script>
    <script src="~/js/plugins.js"></script>
    <script src="~/js/main.js"></script>

</body>

</html>